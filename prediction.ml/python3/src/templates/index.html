<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
  <meta charset="UTF-8">
  <title>Tornado Prediction Python</title>
  <link rel="stylesheet" href="{{ static_url("basic.css") }}" type="text/css">
</head>
<body>
<div id="body">
  <div style="float:right">
    <a href="/">HOME</a>
  </div>
  <div style="margin-bottom:1em">
    <h1>prediction-python</h1>
  </div>
  <div id="example">
    <h2>REST</h2>
    <h3>Upload New Model Version</h3>
    <pre><code>
    curl -X POST -F bundle=@/path/to/bundle.tar.gz \
      http://prediction-python3.pipeline.demo.pipeline.io/api/v1/{model_type}/model_namespace}/{model_name}/{model_version}
    </code></pre>

    <h3>Predict</h3>
    <pre><code>
    curl -X POST -H "Content-Type: application/json" -d '{requestBody}' \
      http://prediction-python3.pipeline.demo.io/api/v1/{model_type}/{model_namespace}/{model_name}/{model_version}
    </code></pre>

    <h3>Key Parameters</h3>
    <table>
      <tbody>
        <tr>
          <th align="right">model_type</th>
          <td>arbitrary namespace; "python3" by default</td>
        </tr>
        <tr>
          <th align="right">model_namespace</th>
          <td>arbitrary namespace; "default" by default</td>
        </tr>
        <tr>
          <th align="right">model_name</th>
          <td>anything you'd like, but usually the logical name of your model; ie. census, iris</td>
        </tr>
        <tr>
          <th align="right">model_version</th>
          <td>version of model; unique within {model_namespace}/{model_name}; ie. v0, myModelA, yourModel_9</td>
        </tr>
        <tr>
          <th align="right">model_store_home</th>
          <td>path to parent directory containing all model assets (directory above {model_type})</td>
        </tr>
      </tbody>
    </table>
    </br>&nbsp;</br>

    <h2>PipelineIO Command Line Interface (CLI)</h2>
    <pre><code>
    pip install pio-cli
    </code></pre>

    <h3>TODO:  Update this with latest pio-cli docs -- Upload New Model Version</h3>
    <pre><code>
    pio deploy-model --model_server_url={model_server_url} --model_type={model_type} --model_namespace={model_namespace} --model_name={model_name} \
      --model_version={model_version} --model_bundle_path=/path/to/{model_namespace}/{model_name}/{model_version}/
    </code></pre>

    <h3>Predict</h3>
    <pre><code>
    pio model_predict --model_server_url={model_server_url} --model_namespace={model_namespace} --model_name={model_name} \
      --model_version={model_version} --input_file_path=/path/to/inputs.json
    </code></pre>
  </div>
</div>
</body>
</html>
